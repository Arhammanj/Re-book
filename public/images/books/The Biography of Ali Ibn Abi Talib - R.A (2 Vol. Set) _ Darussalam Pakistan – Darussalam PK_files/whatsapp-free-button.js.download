!function(){"use strict";var t=null,e=encodeURIComponent;function n(){return window.innerWidth<768}function o(t){return t.replace(/\.myshopify\.com$/i,"")}function i(t,e){t.classList.add(e)}function a(t,e){t.classList.remove(e)}function r(t){var e=document.getElementById(t);return e?e.content.cloneNode(!0).firstElementChild:null}function s(){var t=document.querySelector('script[src*="whatsapp-free-button"]');return t?t.src.replace(/whatsapp-free-button\.js.*/,""):""}function l(t,n){if(t&&n){var o="https://widget.shopifywpbutton.com/click/"+e(t)+"/"+e(n);navigator.sendBeacon?navigator.sendBeacon(o):window.fetch&&fetch(o,{method:"POST",keepalive:!0}).catch(function(){})}}function p(t){this.container=t,this.shopId=o(t.getAttribute("data-shop")||""),window.WFB.shopId=this.shopId,this.data=null,this.isOpen=!1,this.isVisible=!1,this.wrapper=null,this.toggleButton=null,this.platformButtons=[],this.scrollHandler=null,this.exitHandler=null,this.showToggle=!0,this.agentPopup=null,this.agentPopupPlatform=null,this.init()}function c(){var t=document.getElementById("wfb-widget-container");t&&!t.getAttribute("data-initialized")&&(t.setAttribute("data-initialized","true"),new p(t))}p.prototype={init:function(){var e,n,o=this;this.shopId&&(e=function(t){t&&o.fetchConfig(function(t){if(t&&t.success&&t.data){if(o.data=t.data,!o.data.is_active||!o.data.platforms||!o.data.platforms.length)return;o.showToggle=o.data.appearance&&!1!==o.data.appearance.show_toggle,o.render(),o.bindEvents(),o.setupTriggers(),o.data.appearance&&o.data.appearance.chat_widget&&o.data.appearance.chat_widget.enabled&&o.loadChatModule()}})},(n=new XMLHttpRequest).open("GET",s()+"icons.json",!0),n.onreadystatechange=function(){if(4===n.readyState)try{t=JSON.parse(n.responseText),e(!0)}catch(t){e(!1)}},n.onerror=function(){e(!1)},n.send())},fetchConfig:function(t){var n=new XMLHttpRequest,i="https://widget.shopifywpbutton.com/widget/"+e(o(this.shopId))+".json";n.open("GET",i,!0),n.onreadystatechange=function(){if(4===n.readyState)try{t(JSON.parse(n.responseText))}catch(e){t(null)}},n.onerror=function(){t(null)},n.send()},getVisiblePlatforms:function(){var t=n();return(this.data.platforms||[]).filter(function(e){var n=e.show_on||{desktop:!0,mobile:!0};return t?!1!==n.mobile:!1!==n.desktop})},getPlatformUrl:function(t){return t.url||"#"},getAgentUrl:function(t,e){return"whatsapp"===t.id&&e.phone_number?"https://wa.me/"+e.phone_number.replace(/\+/g,""):e.url||t.url||"#"},render:function(){var e=this,n=this.data.appearance||{},o=n.position||"right",a=n.bottom_spacing||25,s=n.side_spacing||25;this.wrapper=r("wfb-tpl-wrapper"),this.wrapper.style.bottom=a+"px";var l="left"===o||"custom"===o&&"left"===n.custom_side;if(l?(this.wrapper.style.left=s+"px",this.wrapper.style.right="auto",i(this.wrapper,"wfb-position-left")):(this.wrapper.style.right=s+"px",this.wrapper.style.left="auto",i(this.wrapper,"wfb-position-right")),this.showToggle){var p=this.wrapper.querySelector(".wfb-toggle");p.querySelector(".wfb-icon-open").innerHTML=t.chat,p.querySelector(".wfb-icon-close").innerHTML=t.close}else i(this.wrapper,"wfb-no-toggle"),this.wrapper.querySelector(".wfb-toggle").remove();var c=this.wrapper.querySelector(".wfb-buttons");this.getVisiblePlatforms().forEach(function(n){var o=n.agents&&n.agents.length>0,a=r(o?"wfb-tpl-btn-div":"wfb-tpl-btn-link");a.setAttribute("data-platform",n.id),a.style.setProperty("--wfb-platform-color",n.color||"#000"),o||(a.href=e.getPlatformUrl(n)),a.querySelector(".wfb-tooltip").textContent=n.name||n.id,l&&i(a.querySelector(".wfb-tooltip"),"wfb-tooltip-right"),a.querySelector(".wfb-item").style.backgroundColor=n.color||"#000",a.querySelector(".wfb-icon").innerHTML=t[n.id]||t.chat,e.showToggle||i(a,"wfb-platform-visible"),c.appendChild(a)}),this.container.appendChild(this.wrapper),this.container.style.display="block",this.toggleButton=this.wrapper.querySelector(".wfb-toggle"),this.platformButtons=this.wrapper.querySelectorAll(".wfb-platform-btn")},showAgentPopup:function(e){for(var n=this,o=null,i=0;i<this.data.platforms.length;i++)if(this.data.platforms[i].id===e){o=this.data.platforms[i];break}if(o&&o.agents&&o.agents.length){this.closeAgentPopup(),this.agentPopupPlatform=o,this.agentPopup=r("wfb-tpl-agent-popup");var a=this.agentPopup.querySelector(".wfb-agent-popup-header");a.style.backgroundColor=o.color,a.querySelector("h3").textContent="Contact Us On "+o.name,a.querySelector(".wfb-agent-popup-close").innerHTML=t.close;var s=this.agentPopup.querySelector(".wfb-agent-list");o.agents.forEach(function(t){var e=r("wfb-tpl-agent-item");e.href=n.getAgentUrl(o,t);var i=function(t,e,n,o){if(t){var i=document.createElement("img");return i.src=t,i.alt=e||"",i.className=o,i}var a=document.createElement("div");return a.className=o+"-placeholder",n&&(a.style.backgroundColor=n),a.textContent=(e||"A").charAt(0).toUpperCase(),a}(t.avatar,t.name,o.color,"wfb-agent-avatar");e.insertBefore(i,e.firstChild),e.querySelector(".wfb-agent-name").textContent=t.name,e.querySelector(".wfb-agent-role").textContent=t.role,e.addEventListener("click",function(){l(n.shopId,o.id)}),s.appendChild(e)}),this.wrapper.appendChild(this.agentPopup),this.agentPopup.querySelector(".wfb-agent-popup-close").addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n.closeAgentPopup()})}},closeAgentPopup:function(){this.agentPopup&&this.agentPopup.parentNode&&this.agentPopup.parentNode.removeChild(this.agentPopup),this.agentPopup=null,this.agentPopupPlatform=null},bindEvents:function(){var t=this;this.toggleButton&&this.toggleButton.addEventListener("click",function(e){e.preventDefault(),t.toggle()});for(var e=this.data.appearance&&this.data.appearance.chat_widget&&this.data.appearance.chat_widget.enabled,n=0;n<this.platformButtons.length;n++)(function(n){var o=n.querySelector(".wfb-item"),r=n.querySelector(".wfb-tooltip"),s=n.getAttribute("data-platform");o&&r&&(o.addEventListener("mouseenter",function(){i(r,"wfb-tooltip-visible")}),o.addEventListener("mouseleave",function(){a(r,"wfb-tooltip-visible")})),"whatsapp"===s&&e?n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),l(t.shopId,s),window.WFBChat&&window.WFBChat.toggle&&window.WFBChat.toggle()}):n.classList.contains("wfb-ha")?n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var o=n.getAttribute("data-platform");l(t.shopId,o),t.agentPopupPlatform&&t.agentPopupPlatform.id===o?t.closeAgentPopup():t.showAgentPopup(o)}):n.addEventListener("click",function(){l(t.shopId,s)})})(this.platformButtons[n]);this.showToggle&&document.addEventListener("click",function(e){t.isOpen&&t.wrapper&&!t.wrapper.contains(e.target)&&t.close()}),document.addEventListener("click",function(e){t.agentPopup&&t.wrapper&&!t.wrapper.contains(e.target)&&t.closeAgentPopup()}),window.addEventListener("resize",function(){t.update()})},setupTriggers:function(){var t=this,e=this.data.triggers||{};if(e.active){var o=e.display_after_seconds||{},i=e.display_after_scroll||{},a=e.exit_intent||{},r=!1;if(o.enabled&&setTimeout(function(){r||(r=!0,t.show())},1e3*(o.value||0)),i.enabled){var s=i.value||25;this.scrollHandler=function(){(window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100>=s&&!r&&(r=!0,t.show(),window.removeEventListener("scroll",t.scrollHandler))},window.addEventListener("scroll",this.scrollHandler)}a.enabled&&!n()&&(this.exitHandler=function(e){e.clientY<10&&!r&&(r=!0,t.show(),document.removeEventListener("mouseout",t.exitHandler))},document.addEventListener("mouseout",this.exitHandler)),o.enabled||i.enabled||a.enabled||this.show()}else this.show()},show:function(){this.wrapper&&!this.isVisible&&(i(this.wrapper,"wfb-visible"),this.isVisible=!0)},toggle:function(){this.showToggle&&(this.isOpen?this.close():this.open())},open:function(){if(this.wrapper&&this.showToggle){i(this.wrapper,"wfb-open"),this.isOpen=!0;var t=this.toggleButton.querySelector(".wfb-icon-open"),e=this.toggleButton.querySelector(".wfb-icon-close");t&&i(t,"wfb-hidden"),e&&a(e,"wfb-hidden");for(var n=0;n<this.platformButtons.length;n++)i(this.platformButtons[n],"wfb-platform-visible")}},close:function(){if(this.wrapper&&this.showToggle){a(this.wrapper,"wfb-open"),this.isOpen=!1;var t=this.toggleButton.querySelector(".wfb-icon-open"),e=this.toggleButton.querySelector(".wfb-icon-close");t&&a(t,"wfb-hidden"),e&&i(e,"wfb-hidden");for(var n=0;n<this.platformButtons.length;n++)a(this.platformButtons[n],"wfb-platform-visible")}},update:function(){this.wrapper&&(this.container.removeChild(this.wrapper),this.render(),this.bindEvents(),this.isVisible&&i(this.wrapper,"wfb-visible"),this.isOpen&&this.showToggle&&this.open())},loadChatModule:function(){var e=this,n=document.createElement("script");n.src=s()+"wfb-chat.js",n.onload=function(){window.WFBChat&&window.WFBChat.init(e.container,e.data,t)},document.head.appendChild(n)}},window.WFB={aC:i,rC:a,gT:r,E:e,sendClick:l,shopId:null},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}();